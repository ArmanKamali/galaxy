{"version":3,"sources":["mvc/grid/grid-shared.js"],"names":["View","Backbone","extend","initialize","options","self","this","_loadingIndicator2","default","markViewAsLoading","model","Model","item","get","title","$","ajax","url","Galaxy","root","param","params","success","response","set","render","grid","_gridView2","$el","append","attributes","shared_by_others","length","$table","_","each","it","index","_templateShared","username","display_url","escape","$tmpl","toLowerCase"],"mappings":"yOAIIA,EAAOC,SAASD,KAAKE,QACrBC,WAAY,SAASC,GACjB,IAAIC,EAAOC,KACXC,EAAAC,QAAiBC,kBAAkBH,MACnCA,KAAKI,MAAQ,IAAIT,SAASU,MAAMP,GAChCE,KAAKM,KAAON,KAAKI,MAAMG,IAAI,QAC3BP,KAAKQ,MAAQR,KAAKI,MAAMG,IAAI,UAC5BE,EAAEC,MACEC,IAAQC,OAAOC,KAAOb,KAAKM,KAA3B,IAAmCN,KAAKI,MAAMG,IAAI,aAAlD,IAAkEE,EAAEK,MAAMF,OAAOG,QACjFC,QAAS,SAASC,GACdlB,EAAKK,MAAMc,IAAID,GACflB,EAAKoB,aATbA,OAAA,WACA,IAAAC,EAAA,IAAAC,EAAAnB,QAAAF,KAAAI,MAAiBD,YACjBH,KAAAsB,IAAKlB,QAAQmB,OAAI5B,EAAAA,KACjBK,KAAAsB,IAAKhB,OAAON,KAAKI,oBAGbO,gBAAQC,WACRI,IAAAA,EAAAA,KACIjB,EAAAA,EAAAA,YAAAC,KAAeiB,MAAfV,IAAA,UAAAR,yCACAA,EAAAA,KAAKoB,MAALK,WACH,GAAA1B,EAAA2B,kBAAA3B,EAAA2B,iBAAAC,OAAA,EAAA,CALE,IAAPC,EAAAlB,EAPwB,+IAmCpBmB,EAAEC,KAAK/B,EAAQ2B,iBAAkB,SAACK,EAAIC,GAb9CC,IAAAA,EAAiBpB,OAAAC,KAAAd,EAAWO,KAA5B0B,0CACQjC,EAAOkC,SADfD,SAEgBvB,EAAAA,KACRX,EAAAA,OAAAA,oBACAoC,EADApC,KACoC2B,EAAAA,OAAAA,EAARjB,OAD5BV,gBACiE8B,EAAAO,OAC7DR,EAAAA,UAFJ7B,gBAmBCsC,EATDb,OAAAI,QAWHS,EApBDb,OAoBC,MAAMvB,KAAAI,MAAAG,IAAA,UAAA8B,cAAN,+BAEA,OAAAD,gBAML1C,KAAMA","file":"../../../scripts/mvc/grid/grid-shared.js","sourcesContent":["/** This class renders the grid list with shared section. */\nimport GridView from \"mvc/grid/grid-view\";\nimport LoadingIndicator from \"ui/loading-indicator\";\n\nvar View = Backbone.View.extend({\n    initialize: function(options) {\n        var self = this;\n        LoadingIndicator.markViewAsLoading(this);\n        this.model = new Backbone.Model(options);\n        this.item = this.model.get(\"item\");\n        this.title = this.model.get(\"plural\");\n        $.ajax({\n            url: `${Galaxy.root + this.item}/${this.model.get(\"action_id\")}?${$.param(Galaxy.params)}`,\n            success: function(response) {\n                self.model.set(response);\n                self.render();\n            }\n        });\n    },\n\n    render: function() {\n        var grid = new GridView(this.model.attributes);\n        this.$el.empty().append(grid.$el);\n        this.$el.append(this._templateShared());\n    },\n\n    _templateShared: function() {\n        var self = this;\n        var $tmpl = $(`<div><h2>${this.model.get(\"plural\")} shared with you by others</h2></div>`);\n        var options = this.model.attributes;\n        if (options.shared_by_others && options.shared_by_others.length > 0) {\n            var $table = $(\n                '<table class=\"colored\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" width=\"100%\">' +\n                    '<tr class=\"header\">' +\n                    \"<th>Title</th>\" +\n                    \"<th>Owner</th>\" +\n                    \"</tr>\" +\n                    \"</table>\"\n            );\n            _.each(options.shared_by_others, (it, index) => {\n                var display_url = `${Galaxy.root + self.item}/display_by_username_and_slug?username=${\n                    it.username\n                }&slug=${it.slug}`;\n                $table.append(\n                    `<tr><td><a href=\"${display_url}\">${_.escape(it.title)}</a></td><td>${_.escape(\n                        it.username\n                    )}</td></tr>`\n                );\n            });\n            $tmpl.append($table);\n        } else {\n            $tmpl.append(`No ${this.model.get(\"plural\").toLowerCase()} have been shared with you.`);\n        }\n        return $tmpl;\n    }\n});\n\nexport default {\n    View: View\n};\n"]}